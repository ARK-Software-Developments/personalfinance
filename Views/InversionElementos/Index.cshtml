@using PersonalFinance.Helper
@using System.Globalization
@using PersonalFinanceApiNetCoreModel
@{

    List<InversionElemento> inversionElementos = ViewBag.InversionElementos;

}


<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="~/css/personalfinance.styles.css">

<script>
     $(function () {
        $('[data-bs-toggle="tooltip"]').tooltip();
    });

 </script>

<div class="text-center">
    <h1 class="display-5">@ViewBag.Message</h1>
    <p>Listado de @ViewBag.Modulo.</p>
</div> 

<div class="tab-content">
    <div class="row">
        <div class="datatable-top">
            <div class="datatable-search">

                <form method="get">
                    @if (@ViewBag.Buscar == "Buscar" )
                    {
                        <input type="text"
                               name="search"
                               value=""
                               placeholder="Buscar..."
                               class="form-control"
                               style="width: 250px; display:inline-block;" />
                    }
                    

                    <button type="submit" class="btn btn-primary">
                        @ViewBag.Buscar
                    </button>
                </form>

            </div>
        </div>
        </div>
        <p></p>
    
        <div class="row">
        <table class="table myaccordion table-hover" id="accordion">
            <thead>
                <tr>
                    <th scope="col">Id</th>
                    <th scope="col">Tipo</th>
                    <th scope="col">Nombre</th>
                    <th scope="col">Detalle</th>
                    <th scope="col" align="center">Fecha de Operación</th>
                    <th scope="col">Cantidad</th>
                    <th scope="col">Monto Unitario</th>                    
                    <th scope="col">Monto Invertido</th>
                    <th scope="col">Monto Impuestos</th>
                    <th scope="col">Monto Resultado</th>
                    <th scope="col">Estado</th>
                    <th>
                        &nbsp;
                        <form method="post" asp-controller="@ViewBag.Modulo">
                            <button type="submit" class="btn btn-primary" asp-controller="@ViewBag.Modulo" asp-action="@ViewBag.Modulo" name="action" value="openFormAdd">Add new @ViewBag.Modulo</button>
                        </form>
                    </th>
                </tr>
            </thead>
            <tbody>
                @foreach (var entidad in @inversionElementos)
                {
                    var detalle = $"{entidad.Instrumento.Detalle} [{entidad.Instrumento.Codigo}]";
                    <tr>
                        <td scope="row" id="Id">@entidad.Id</td>
                        <td scope="row" id="Tipo">@entidad.Instrumento.Tipo.Tipo</td>
                        <td scope="row" id="Nombre">@entidad.Instrumento.Tipo.Nombre</td>
                        <td scope="row" id="Detalle">@detalle</td>
                        <td scope="row" id="FechaOperacion">@entidad.FechaOperacion?.ToString("dd/MM/yyy", new CultureInfo("es-ES"))</td>
                        <td scope="row" id="Cantidad">@entidad.Cantidad</td>
                        <td scope="row" id="MontoUnitario">@entidad.MontoUnitario.ToString("C", new CultureInfo("es-AR"))</td>
                        <td scope="row" id="MontoInvertido">@entidad.MontoInvertido.ToString("C", new CultureInfo("es-AR"))</td>
                        <td scope="row" id="MontoImpuestos">@entidad.MontoImpuestos.ToString("C", new CultureInfo("es-AR"))</td>
                        <td scope="row" id="MontoResultado">@entidad.MontoResultado.ToString("C", new CultureInfo("es-AR"))</td>
                        <td scope="row" id="Estado">@entidad.Estado</td>
                        <td>
                            <form method="post" asp-controller="@ViewBag.Modulo" asp-route-id="@entidad.Id">
                                <input type="number" name="Id" value="@entidad.Id" hidden="hidden" />
                                <button type="submit" class="btn btn-secondary" asp-controller="@ViewBag.Modulo" asp-action="@ViewBag.Modulo" name="action" value="openFormEdit">Edit @ViewBag.Modulo</button>
                                &nbsp;|&nbsp;
                                <button type="submit" class="btn btn-secondary" asp-controller="@ViewBag.Modulo" asp-action="@ViewBag.Modulo" name="action" value="openFormView">View @ViewBag.Modulo</button>
                            </form>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<p></p>
<p>>>>>>&nbsp;&nbsp;@ViewBag.Ruta</p>
<a href="/@ViewBag.Modulo" class="btn btn-secondary">Volver</a>

<script src="~/js/jquery.min.js"></script>
<script src="~/js/popper.js"></script>
<script src="~/js/bootstrap.min.js"></script>
<script src="~/js/main.js"></script>